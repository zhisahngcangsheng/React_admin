{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/work/private/\\u535A\\u5BA2/reacrAdmin/src/pages/login/user.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from 'react';\nimport style from \"./css/user.less\";\nimport { Button, Form, Input } from \"antd\";\nimport { LockOutlined, UserOutlined } from \"@ant-design/icons\";\nimport { useTranslation } from \"react-i18next\";\nimport { useHistory } from 'react-router-dom';\nimport { setCookie } from \"../../util/cookie\";\nimport { login } from './../../api/login';\nimport asyncComponent from \"../../component/asyncComponent\";\nimport { MyState } from \"../../reducer\";\nexport default function User() {\n  _s();\n\n  const {\n    dispatch\n  } = useContext(MyState);\n  const {\n    t\n  } = useTranslation();\n  const history = useHistory();\n\n  function onFinish(e) {\n    login({}).then(res => {\n      /*\n      * 根据接口信息返回配置动态路由\n      * 将用户信息和路由信息储存到sessionStorage里\n      * 登录按钮函数\n      * */\n      if (res.data.code === 200) {\n        let router = res.data.data.router.reduce((perv, cur, index) => {\n          if (index === 1) {\n            perv.children.forEach(i => {\n              i.component = asyncComponent(() => import(`@/pages/${i.path}`));\n            });\n          }\n\n          cur.children.forEach(i => {\n            i.component = asyncComponent(() => import(`@/pages/${i.path}`));\n          });\n          return perv.children.concat(cur.children);\n        });\n        dispatch({\n          type: 'setRouter',\n          router\n        });\n        dispatch({\n          type: 'setRouterList',\n          routerList: res.data.data.router\n        });\n        sessionStorage.setItem('router', JSON.stringify(res.data.data.router));\n        setCookie('Token', res.data.data.token);\n        history.replace('/home/1');\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    name: \"normal_login\",\n    className: \"login-form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"username\",\n      rules: [{\n        required: true,\n        message: t('user')\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n          className: \"site-form-item-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 36\n        }, this),\n        placeholder: t('user')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      name: \"password\",\n      rules: [{\n        required: true,\n        message: t('password')\n      }],\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n          className: \"site-form-item-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 33\n        }, this),\n        type: \"password\",\n        placeholder: t('password')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: style.loginSub,\n        children: t('login')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 13\n  }, this);\n}\n\n_s(User, \"j+SE8jzqexSSrfZ/rtsDCRbO6uY=\", false, function () {\n  return [useTranslation, useHistory];\n});\n\n_c = User;\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"sources":["/Users/work/private/博客/reacrAdmin/src/pages/login/user.jsx"],"names":["React","useContext","style","Button","Form","Input","LockOutlined","UserOutlined","useTranslation","useHistory","setCookie","login","asyncComponent","MyState","User","dispatch","t","history","onFinish","e","then","res","data","code","router","reduce","perv","cur","index","children","forEach","i","component","path","concat","type","routerList","sessionStorage","setItem","JSON","stringify","token","replace","remember","required","message","loginSub"],"mappings":"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","sourcesContent":["import React, {useContext} from 'react';\nimport style from \"./css/user.less\";\nimport {Button, Form, Input} from \"antd\";\nimport {LockOutlined, UserOutlined} from \"@ant-design/icons\";\nimport {useTranslation} from \"react-i18next\";\n\nimport {useHistory} from 'react-router-dom';\nimport {setCookie} from \"../../util/cookie\";\nimport {login} from './../../api/login';\nimport asyncComponent from \"../../component/asyncComponent\";\nimport {MyState} from \"../../reducer\";\nexport default function User() {\n    const {dispatch} = useContext(MyState);\n    const { t } = useTranslation();\n    const history = useHistory();\n    function onFinish(e){\n        login({}).then(res =>{\n            /*\n            * 根据接口信息返回配置动态路由\n            * 将用户信息和路由信息储存到sessionStorage里\n            * 登录按钮函数\n            * */\n            if(res.data.code === 200){\n                let router = res.data.data.router.reduce((perv,cur,index)=>{\n                    if(index === 1){\n                        perv.children.forEach(i => {\n                            i.component = asyncComponent(()=>import(`@/pages/${i.path}`));\n                        })\n                    }\n                    cur.children.forEach(i => {\n                        i.component = asyncComponent(()=>import(`@/pages/${i.path}`));\n\n                    })\n                    return perv.children.concat(cur.children)\n                })\n                dispatch({\n                    type:'setRouter',\n                    router,\n                });\n                dispatch({\n                    type:'setRouterList',\n                    routerList:res.data.data.router,\n                });\n                sessionStorage.setItem('router',JSON.stringify(res.data.data.router));\n                setCookie('Token',res.data.data.token)\n                history.replace('/home/1');\n            }\n        })\n    }\n    return(\n            <Form\n                name=\"normal_login\"\n                className=\"login-form\"\n                initialValues={{ remember: true }}\n                onFinish={onFinish}\n            >\n                <Form.Item\n                    name=\"username\"\n                    rules={[{ required: true, message: t('user')}]}\n                >\n                    <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder={t('user')} />\n                </Form.Item>\n                <Form.Item\n                    name=\"password\"\n                    rules={[{ required: true, message: t('password') }]}\n                >\n                    <Input\n                        prefix={<LockOutlined className=\"site-form-item-icon\" />}\n                        type=\"password\"\n                        placeholder={t('password')}\n                    />\n                </Form.Item>\n\n                <Form.Item>\n                    <Button type=\"primary\" htmlType=\"submit\" className={style.loginSub}>\n                        {t('login')}\n                    </Button>\n                </Form.Item>\n            </Form>\n\n    )\n\n}\n\n\n"]},"metadata":{},"sourceType":"module"}